/*!
 *
 *  Web Starter Kit
 *  Copyright 2015 Google Inc. All rights reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *    https://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License
 *
 */
function testAnInput(n){for(var t=n.split(","),e=!1,o=!1,i=!1,a=[],r=[],c=[],s=0;s<t.length;s++){var h=t[s].replace(" ","").toLowerCase();h.length>1&&(h.indexOf("shift_")!=-1?(o=!0,h=h.split("_")[1]):"capslock"==h&&(i=!i)),1==h.length&&(e=isUppercase(o,i),c.push(e),o&&(o=!1),r.push(h))}a=skey_lexer(r.join(""));for(var u=0;u<a.length;u++)a[u].push(c[u]);a=skey_eval(a);const l=a.map(function(n){return n[0]}).join("");return l}function isUppercase(n,t){return(!n||!t)&&(n||t)}!function(){"use strict";var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||n)&&navigator.serviceWorker.register("service-worker.js").then(function(n){n.onupdatefound=function(){if(navigator.serviceWorker.controller){var t=n.installing;t.onstatechange=function(){switch(t.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}})["catch"](function(n){console.error("Error during service worker registration:",n)})}(),function(){function n(n){return(!n.getModifierState("Shift")||!n.getModifierState("CapsLock"))&&!(!n.getModifierState("Shift")&&!n.getModifierState("CapsLock"))}function t(t,o){for(var i=0;i<t.length;i++){var a=e(t[i][0]);i==t.length-1&&o&&16!=o.keyCode&&20!=o.keyCode&&(a=a||n(o)),t[i].push(a)}}function e(n){return b.indexOf(n.toLowerCase())!==-1&&n==n.toUpperCase()}function o(n){const t=n.selectionStart;for(var e=n.value,o=0,i=t;i>=0;i--){var a=e[i];if(s.indexOf(a)!==-1){o=i+1;break}}return[o,t,e.substr(o,t-o)]}function i(n,t,e,o){const i=t.map(function(n){return n[0]}).join("");n.value=n.value.substring(0,e)+i+n.value.substring(o)}function a(n){for(var t=0;t<n.length;t++){const e=n[t];if(console.log("@@@pre token",e),e[1]===u||e[1]===h){if(n.length>1&&L.indexOf(e[0].toLowerCase())!==-1)continue;e[0]=m[e[0].toLowerCase()],e[1]=S.indexOf(e[0].toLowerCase())!==-1?g:f,console.log("@@@token",e),e[0]=e[2]?e[0].toUpperCase():e[0]}}return n}function r(n){for(var t,e,o,i,a,r,s=0;s<n.length;s++){const h=n[s];console.log(" - Considering token: ",h),h[1]===g?(o=e?[s,h]:o,e=!e&&t?[s,h]:e,t=t?t:[s,h],console.log(" --- 1st vowel",t&&t.slice()),console.log(" --- 2nd vowel",e&&e.slice()),console.log(" --- 3rd vowel",o&&o.slice())):h[1]===f?i=t||e||o?[s,h]:i:h[1]===l&&(a=[s,h])}return console.log(" - 1st vowel",t),console.log(" - 2nd vowel",e),console.log(" - 3rd vowel",o),console.log(" - Last consonant",i),console.log(" - Accent",a),r&&a?c(r[1],a[1])&&n.splice(a[0],1):e&&a?o&&"y"===e[1][0].toLowerCase()&&"ê"===o[1][0].toLowerCase()?(console.log("TAO O TRONG DAY"),c(o[1],a[1])&&n.splice(a[0],1)):"uư".indexOf(t[1][0].toLowerCase())!==-1&&"a".indexOf(e[1][0].toLowerCase())!==-1?n[t[0]-1]&&"q"===n[t[0]-1][0].toLowerCase()?c(e[1],a[1])&&n.splice(a[0],1):c(t[1],a[1])&&n.splice(a[0],1):"i".indexOf(t[1][0].toLowerCase())!==-1&&"a".indexOf(e[1][0].toLowerCase())!==-1?n[t[0]-1]&&"g"===n[t[0]-1][0].toLowerCase()?"5"===a[1][0]?c(t[1],a[1])&&n.splice(a[0],1):c(e[1],a[1])&&n.splice(a[0],1):c(t[1],a[1])&&n.splice(a[0],1):"a".indexOf(t[1][0].toLowerCase())!==-1&&"o".indexOf(e[1][0].toLowerCase())!==-1?c(t[1],a[1])&&n.splice(a[0],1):c(e[1],a[1])&&n.splice(a[0],1):t&&a&&c(t[1],a[1])&&n.splice(a[0],1),n}function c(n,t){const e=_[n[0].toLowerCase()+t[0]];if(e){n[0]=e;const o=n[2];return n[0]=o?n[0].toUpperCase():n[0],!0}return!1}window.onTextBoxChange=function(n,e){const a=o(n);if(e&&16!==e.keyCode&&20!==e.keyCode){var r=skey_lexer(a[2]);r.length>0&&(t(r,e),r=skey_eval(r),i(n,r,a[0],a[1]))}};const s=" \n\t",h="ONE_KEY_VOWEL_TAG",u="ONE_KEY_CONSONANT_TAG",l="ACCENT_KEY",g="VOWEL",f="CONSONANT",p="DIGIT",k="aáàảãạăắằẳẵặâầẩẫậ",d="eéèẻẽẹêếềểễệ",y="iíìỉĩị",v="oóòỏõọơớờởỡợôốồổỗộ",w="uúùủũụưứừửữự",C="yýỳỷỹỵ",S=[k,d,y,v,w,C].join(""),b=[S,"cdđefghijklmnopqrstvwxyz"].join(""),T=[[/[ \n\t]+/,null],[/[6-9^&*({}\[\]]+/,h],[/[zdZD]+/,u],[/[1-5]+/,l],[/[0-9]+/,p],[/[^aeiouáàảãạăắằẳẵặâầẩẫậéèẻẽẹêếềểễệíìỉĩịóòỏõọơớờởỡợôốồổỗộúùủũụưứừửữựyýỳỷỹỵ6-9]+/i,f],[/[aeiouáàảãạăắằẳẵặâầẩẫậéèẻẽẹêếềểễệíìỉĩịóòỏõọơớờởỡợôốồổỗộúùủũụưứừửữựyýỳỷỹỵ]+/i,g]],_={a1:"á",a2:"à",a3:"ả",a4:"ã",a5:"ạ","ă1":"ắ","ă2":"ằ","ă3":"ẳ","ă4":"ẵ","ă5":"ặ","â1":"ấ","â2":"ầ","â3":"ẩ","â4":"ẫ","â5":"ậ",e1:"é",e2:"è",e3:"ẻ",e4:"ẽ",e5:"ẹ","ê1":"ế","ê2":"ề","ê3":"ể","ê4":"ễ","ê5":"ệ",i1:"í",i2:"ì",i3:"ỉ",i4:"ĩ",i5:"ị",o1:"ó",o2:"ò",o3:"ỏ",o4:"õ",o5:"ọ","ơ1":"ớ","ơ2":"ờ","ơ3":"ở","ơ4":"ỡ","ơ5":"ợ","ô1":"ố","ô2":"ồ","ô3":"ổ","ô4":"ỗ","ô5":"ộ",u1:"ú",u2:"ù",u3:"ủ",u4:"ũ",u5:"ụ","ư1":"ứ","ư2":"ừ","ư3":"ử","ư4":"ữ","ư5":"ự",y1:"ý",y2:"ỳ",y3:"ỷ",y4:"ỹ",y5:"ỵ"},m={6:"â",7:"ê",8:"ô",9:"ă","[":"ư","]":"ơ","^":"â","&":"ê","*":"ô","(":"ă","{":"ư","}":"ơ",z:"d",d:"đ"},L="d";window.skey_lexer=function(n){for(var t=0,e=[],o=!1,i=!1;t<n.length;){for(var a=null,r=0;r<T.length;r++){const c=T[r],s=c[0],p=c[1],k=n[t];if(a=s.test(k)){if(p){if((p===h||p===u)&&t>0&&!o&&!i)continue;if(o||p!==g&&p!==h||(o=!0),i||p!==f&&p!==u||(i=!0),p===l&&!o)continue;const d=[k,p];e.push(d)}break}}a&&(t+=1)}return e},window.skey_eval=function(n){return n=a(n),n=r(n)}}();const testData=[["a,1","á","","Dấu sắc"],["a,2","à","","Dấu huyền"],["a,3","ả","","Dấu hỏi"],["a,4","ã","","Dấu ngã"],["a,5","ạ","","Dấu nặng"],["6","â","","Chữ gõ bằng một phím"],["7","ê"],["8","ô"],["9","ă"],["[","ư"],["]","ơ"],["z","d","z","Theo kiểu gõ dấu Tu Binh Tran-MS thì gõ z bung ra d, và gõ d bung ra đ (S-key: gõ d bung ra đ nhưng gõ z thì vẫn là z)"],["d","đ"],["Shift_a, 1","Á","","In hoa khi chỉ bật phím shift"],["Capslock,a,1","Á","","In hoa khi bật capslock trước đó"],["Capslock, Shift_a, 1","á","","Chữ thường khi shift và capslock cùng được bật"],["Shift_6","Â","","Thử shift với các chữ gõ bằng một phím"],["Shift_7","Ê"],["Shift_8","Ô"],["Shift_9","Ă"],["Shift_[","Ư"],["Shift_]","Ơ"],["c,h,a,2,o","chào","","Thứ tự gõ lần lượt là c, h, a, 2, o."],["h,o,2,a,n,g","hoàng","hòang","Bộ gõ hiện cho ra kết quả sai, chưa xử lý tốt vị trí thứ tự bỏ dấu => Cần xây dựng bộ sửa lỗi chính tả khi gặp thứ tự gõ phím tương tự"],["Shift_9,n","Ăn","","Shift_9 để gõ ra chữ in hoa (Ă)"],["Shift_a,2","À","","Chú ý: Shift_<một phím ghi chữ thường> để gõ in hoa"],["Capslock,a,2","À","","Thứ tự gõ phím: Bật capslock, gõ phím a, gõ phím 2, kết quả là A được in hoa và bỏ dấu huyền"],["Capslock,a,Capslock,n,2","Àn","","Thứ tự gõ: bật capslock, gõ phím a, tắt capslock, gõ phím n, gõ phím 2"],["Capslock,Shift_a,2","à","","Bật capslock, nhưng lại nhấn nút Shift khi gõ phím => vẫn ra chữ thường"],["t,8,n,1","tốn","tôn1","Bộ gõ hiện cho ra kết quả sai, chưa xử lý tốt các dấu sắc huyền hỏi ngã nặng khi sau ký tự ô => Cần sửa lỗi."],["t,8,1","tố","tô1"],["8,n,2","ồn","ôn2"],["1,6","16","ấ","Gõ 61 bung ra ấ (đúng) nhưng gõ 16 Skey vẫn bung ra ấ (sai)."],["1,7","17","ế","Gõ 71 bung ra ế (đúng) nhưng gõ 17 Skey vẫn bung ra ế (sai)."],["2,8","28","ồ","Gõ 82 bung ra ồ (đúng) nhưng gõ 28 Skey vẫn bung ra ồ (sai)."],["3,9","39","ẳ","Gõ 93 bung ra ẳ (đúng) nhưng gõ 39 Skey vẫn bung ra ẳ (sai)."],["h,o,9,1,t","hoắt"],["h,o,9,t,1","hoắt"],["k,h,u,6,1,t","khuất"],["k,h,u,6,t,1","khuất"],["k,h,u,6,1,y","khuấy"],["k,h,u,6,y,1","khuấy"],["l,o,e,1,t","loét"],["l,o,e,t,1","loét"],["n,g,o,e,3,m","ngoẻm"],["n,g,o,e,m,3","ngoẻm"],["n,g,o,e,2,o","ngoèo"],["n,g,o,e,o,2","ngoèo"],["y,7,1,t","yết"],["y,7,t,1","yết"],["k,h,i,7,1,t","khiết"],["k,h,i,7,t,1","khiết"],["y,7,1,u","yếu"],["y,7,u,1","yếu"],["n,g,o,a,1,y","ngoáy"],["n,g,o,a,y,1","ngoáy"],["h,u,],5,t","huợt"],["h,u,],t,5","huợt"],["h,u,],4,n","huỡn"],["h,u,],n,4","huỡn"],["c,u,8,1,c","cuốc"],["c,u,8,c,1","cuốc"],["c,u,8,1,i","cuối"],["c,u,8,i,1","cuối"],["p,h,[,],1,c","phước"],["p,h,[,],c,1","phước"],["c,[,],2,i","cười"],["c,[,],i,2","cười"],["r,[,],5,u","rượu"],["r,[,],u,5","rượu"],["t,u,y,7,t,1","tuyết"],["t,u,y,7,1,t","tuyết"],["q,u,y,7,n,2","quyền"]],PASS_TEXT="<b style='color: green'>PASS</b>",FAIL_TEXT="<b style='color: red'>FAIL</b>";window.onTestButtonPress=function(n,t){for(var e=n.getElementsByTagName("tbody")[0],o=0;o<testData.length;o++){var i=testData[o],a=testAnInput(i[0]),r=i[1]==a,c=e.insertRow(e.rows.length),s=c.insertCell(0);s.innerHTML=i[0],s=c.insertCell(1),s.innerHTML=i[1],s=c.insertCell(2),s.innerHTML=a,s=c.insertCell(3),s.innerHTML=r?PASS_TEXT:FAIL_TEXT,s=c.insertCell(4),s.innerHTML=i[3]||""}};
//# sourceMappingURL=main.min.js.map

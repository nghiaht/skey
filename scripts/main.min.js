/*!
 *
 *  Web Starter Kit
 *  Copyright 2015 Google Inc. All rights reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *    https://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License
 *
 */
function testAnInput(n){for(var t=n.split(","),e=!1,o=!1,i=!1,a=[],r=[],c=[],h=0;h<t.length;h++){var s=t[h].replace(" ","").toLowerCase();s.length>1&&(s.indexOf("shift_")!=-1?(o=!0,s=s.split("_")[1]):"capslock"==s&&(i=!i)),1==s.length&&(e=isUppercase(o,i),c.push(e),o&&(o=!1),r.push(s))}a=skey_lexer(r.join(""));for(var u=0;u<a.length;u++)a[u].push(c[u]);a=skey_eval(a);const l=a.map(function(n){return n[0]}).join("");return l}function isUppercase(n,t){return(!n||!t)&&(n||t)}!function(){"use strict";var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||n)&&navigator.serviceWorker.register("service-worker.js").then(function(n){n.onupdatefound=function(){if(navigator.serviceWorker.controller){var t=n.installing;t.onstatechange=function(){switch(t.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}})["catch"](function(n){console.error("Error during service worker registration:",n)})}(),function(){function n(n){return(!n.getModifierState("Shift")||!n.getModifierState("CapsLock"))&&!(!n.getModifierState("Shift")&&!n.getModifierState("CapsLock"))}function t(t,o){for(var i=0;i<t.length;i++){var a=e(t[i][0]);i==t.length-1&&o&&16!=o.keyCode&&20!=o.keyCode&&(a=a||n(o)),t[i].push(a)}}function e(n){return E.indexOf(n.toLowerCase())!==-1&&n===n.toUpperCase()}function o(n){const t=n.selectionStart;for(var e=n.value,o=0,i=t;i>=0;i--){var a=e[i];if(l.indexOf(a)!==-1){o=i+1;break}}return[o,t,e.substr(o,t-o)]}function i(n,t,e,o){const i=t.map(function(n){return n[0]}).join("");n.value=n.value.substring(0,e)+i+n.value.substring(o)}function a(n){n=n.slice();var t,e,o,i,a;console.log("tokens",n);for(var r,c,h=0,l=0,_=0;_<n.length;_++){const S=n[_];if(S[1]===p&&(c&&(c[1]=w,S[1]=w),h+=1,c=S),S[1]===g||S[1]===f){if(c&&(c[1]=w),r&&r[0]===S[0])return n;r=S,l+=1}}if(h>1)return n;for(var T=0;T<n.length;T++){const S=n[T];if(console.log("@@@pre token",S),S[1]===C)t=S;else if(S[1]===v)e=S;else if(S[1]===y)o=S;else if(S[1]===p)i=S;else if(S[1]===f||S[1]===g){if(t){const m=u(t[0]);if(console.log("found semi",m),m){if(m.indexOf(S[0])!==-1)return t[0]=S[0],t[1]=w,a?(S[1]=w,n):(S[0]="",S[1]=w,n);const L=m[0];if(L.toLowerCase()===S[0].toLowerCase())return t[0]=L[0],t[1]=w,S[1]=w,n}}else if(e){console.log("semiAccentizedConsonant",e);const m=u(e[0]);if(console.log("found semi",m),m){if(m.indexOf(S[0])!==-1)return e[0]=S[0],e[1]=d,a?(S[1]=d,n):(S[0]="",S[1]=d,n);const L=m[0];if(L.toLowerCase()===S[0].toLowerCase())return e[0]=L[0],e[1]=d,S[1]=d,n}}else if(o){const m=s(o[0]);if(console.log("found",m),m){var L;if(m.forEach(function(n){n.indexOf(S[0]!==-1)&&!L&&S[2]&&(L=n)}),L||(L=m[0]),L)return o[0]=L[0],o[1]=k,S[0]=L[1]+S[0],S[1]=w,n}}if(a=S,n.length>1&&D.indexOf(S[0].toLowerCase())!==-1)continue;S[0]=I[S[0].toLowerCase()],S[1]=O.indexOf(S[0].toLowerCase())!==-1?C:v,S[0]=S[2]?S[0].toUpperCase():S[0],S[1]===C&&(t=S)}}return n}function r(n){n=n.slice();for(var t,e,o,i,a,r,u,l=0;l<n.length;l++){const g=n[l];if(g[1]===k||g[1]===C)o=e?[l,g]:o,e=!e&&t?[l,g]:e,t=t?t:[l,g];else if(g[1]===d)i=t||e||o?[l,g]:i;else if(g[1]===p){if(a)return c(n),n;if(a=[l,g],r){const f=s(r[1][0].toLowerCase());if(f)return r[1][0]=f[0][0],r[1][1]=k,f[0][1]!==a[1][0]&&(a[1][0]=f[0][1]+a[1][0]),c(n),n}}else g[1]===y&&(r=[l,g])}return u&&a?h(u[1],a[1])&&n.splice(a[0],1):e&&a?o&&"y"===e[1][0].toLowerCase()&&"ê"===o[1][0].toLowerCase()?h(o[1],a[1])&&n.splice(a[0],1):"uư".indexOf(t[1][0].toLowerCase())!==-1&&"a".indexOf(e[1][0].toLowerCase())!==-1?n[t[0]-1]&&"q"===n[t[0]-1][0].toLowerCase()?h(e[1],a[1])&&n.splice(a[0],1):h(t[1],a[1])&&n.splice(a[0],1):"i".indexOf(t[1][0].toLowerCase())!==-1&&"a".indexOf(e[1][0].toLowerCase())!==-1?n[t[0]-1]&&"g"===n[t[0]-1][0].toLowerCase()?"5"===a[1][0]?h(t[1],a[1])&&n.splice(a[0],1):h(e[1],a[1])&&n.splice(a[0],1):h(t[1],a[1])&&n.splice(a[0],1):"a,ă,â,u,ư,o,ơ,ô".indexOf(t[1][0].toLowerCase())!==-1&&"o,i,y,u".indexOf(e[1][0].toLowerCase())!==-1?h(t[1],a[1])&&n.splice(a[0],1):h(e[1],a[1])&&n.splice(a[0],1):t&&a&&h(t[1],a[1])&&n.splice(a[0],1),c(n),n}function c(n){for(var t=0;t<n.length;t++){const e=n[t];e[0]=e[2]&&e[2]===!0?e[0].toUpperCase():e[0]}}function h(n,t){const e=x[n[0].toLowerCase()+t[0]];if(e){n[0]=e;const o=n[2];return n[0]=o?n[0].toUpperCase():n[0],n[1]=y,!0}return!1}function s(n){return N[n]}function u(n){return M[n]}window.onTextBoxChange=function(n,e){const a=o(n);if(e&&16!==e.keyCode&&20!==e.keyCode){var r=skey_lexer(a[2]);r.length>0&&(t(r,e),r=skey_eval(r),i(n,r,a[0],a[1]))}};const l=" \n\t",g="ONE_KEY_VOWEL_TAG",f="ONE_KEY_CONSONANT_TAG",p="ACCENT_KEY",k="VOWEL",y="ACCENTIZED_VOWEL_TAG",C="SEMI_ACCENTIZED_VOWEL_TAG",d="CONSONANT",v="SEMI_ACCENTIZED_CONSONANT_TAG",w="DIGIT",_="aáàảãạăắằẳẵặâấầẩẫậ",S="eéèẻẽẹêếềểễệ",T="iíìỉĩị",m="oóòỏõọơớờởỡợôốồổỗộ",L="uúùủũụưứừửữự",b="yýỳỷỹỵ",O=[_,S,T,m,L,b].join(""),E=[O,"cdđefghijklmnopqrstvwxyz"].join(""),A=[[/[ \n\t]+/,null],[/[6-9^&*({}\[\]]+/,g],[/[đd]+/i,v],[/[zd]+/i,f],[/[1-5]+/,p],[/[0-9]+/,w],[/[áàảãạ ắằẳẵặ ấầẩẫậ éèẻẽẹ ếềểễệ íìỉĩị óòỏõọ ớờởỡợ ốồổỗộ úùủũụ ứừửữự ýỳỷỹỵ]+/i,y],[/[âăêôơư]+/i,C],[/[^aeiouy6-9]+/i,d],[/[aeiouy]+/i,k]],x={a1:"á",a2:"à",a3:"ả",a4:"ã",a5:"ạ","ă1":"ắ","ă2":"ằ","ă3":"ẳ","ă4":"ẵ","ă5":"ặ","â1":"ấ","â2":"ầ","â3":"ẩ","â4":"ẫ","â5":"ậ",e1:"é",e2:"è",e3:"ẻ",e4:"ẽ",e5:"ẹ","ê1":"ế","ê2":"ề","ê3":"ể","ê4":"ễ","ê5":"ệ",i1:"í",i2:"ì",i3:"ỉ",i4:"ĩ",i5:"ị",o1:"ó",o2:"ò",o3:"ỏ",o4:"õ",o5:"ọ","ơ1":"ớ","ơ2":"ờ","ơ3":"ở","ơ4":"ỡ","ơ5":"ợ","ô1":"ố","ô2":"ồ","ô3":"ổ","ô4":"ỗ","ô5":"ộ",u1:"ú",u2:"ù",u3:"ủ",u4:"ũ",u5:"ụ","ư1":"ứ","ư2":"ừ","ư3":"ử","ư4":"ữ","ư5":"ự",y1:"ý",y2:"ỳ",y3:"ỷ",y4:"ỹ",y5:"ỵ",61:"ấ",62:"ầ",63:"ẩ",64:"ẫ",65:"ậ","^1":"Ấ",71:"ế",72:"ề",73:"ể",74:"ễ",75:"ệ",81:"ố",82:"ồ",83:"ổ",84:"ỗ",85:"ộ",91:"ắ",92:"ằ",93:"ẳ",94:"ẵ",95:"ặ","[1":"ứ","[2":"ừ","[3":"ử","[4":"ữ","[5":"ự","]1":"ớ","]2":"ờ","]3":"ở","]4":"ỡ","]5":"ợ"},N={};Object.keys(x).forEach(function(n){N[x[n]]=N[x[n]]?N[x[n]].concat([n]):[n]});const I={6:"â",7:"ê",8:"ô",9:"ă","[":"ư","]":"ơ","^":"Â","&":"Ê","*":"Ô","(":"Ă","{":"Ư","}":"Ơ",z:"d",d:"đ",Z:"Z",D:"Đ"},D="d",M={};Object.keys(I).forEach(function(n){M[I[n]]=M[I[n]]?M[I[n]].concat([n]):[n]}),window.skey_lexer=function(n){for(var t=0,e=[],o=!1,i=!1,a=!1;t<n.length;){for(var r=null,c=0;c<A.length;c++){const h=A[c],s=h[0],u=h[1],l=n[t];if(r=s.test(l)){if(console.log("token_expr",h),u){if((u===g||u===f)&&t>0&&!o&&!i){console.log("continue ne 1");continue}if(u===f&&n.length>1&&!a)continue;if(o||u!==k&&u!==g&&u!==C&&u!==y||(o=!0),i||u!==d&&u!==f&&u!==v||(i=!0),u===v){if(1===n.length||a){console.log("continue ne 2");continue}a=!0}if(u===p&&!o)continue;const w=[l,u];e.push(w)}break}}r&&(t+=1)}return e},window.skey_eval=function(n){return n=a(n),n=r(n)}}();const testData=[["a,1","á","","Dấu sắc"],["a,2","à","","Dấu huyền"],["a,3","ả","","Dấu hỏi"],["a,4","ã","","Dấu ngã"],["a,5","ạ","","Dấu nặng"],["6","â","","Chữ gõ bằng một phím"],["7","ê"],["8","ô"],["9","ă"],["[","ư"],["]","ơ"],["z","d","z","Theo kiểu gõ dấu Tu Binh Tran-MS thì gõ z bung ra d, và gõ d bung ra đ (S-key: gõ d bung ra đ nhưng gõ z thì vẫn là z)"],["d","đ"],["Shift_a, 1","Á","","In hoa khi chỉ bật phím shift"],["Capslock,a,1","Á","","In hoa khi bật capslock trước đó"],["Capslock, Shift_a, 1","á","","Chữ thường khi shift và capslock cùng được bật"],["Shift_6","Â","","Thử shift với các chữ gõ bằng một phím"],["Shift_7","Ê"],["Shift_8","Ô"],["Shift_9","Ă"],["Shift_[","Ư"],["Shift_]","Ơ"],["c,h,a,2,o","chào","","Thứ tự gõ lần lượt là c, h, a, 2, o."],["h,o,2,a,n,g","hoàng","hòang","Bộ gõ hiện cho ra kết quả sai, chưa xử lý tốt vị trí thứ tự bỏ dấu => Cần xây dựng bộ sửa lỗi chính tả khi gặp thứ tự gõ phím tương tự"],["Shift_9,n","Ăn","","Shift_9 để gõ ra chữ in hoa (Ă)"],["Shift_a,2","À","","Chú ý: Shift_<một phím ghi chữ thường> để gõ in hoa"],["Capslock,a,2","À","","Thứ tự gõ phím: Bật capslock, gõ phím a, gõ phím 2, kết quả là A được in hoa và bỏ dấu huyền"],["Capslock,a,Capslock,n,2","Àn","","Thứ tự gõ: bật capslock, gõ phím a, tắt capslock, gõ phím n, gõ phím 2"],["Capslock,Shift_a,2","à","","Bật capslock, nhưng lại nhấn nút Shift khi gõ phím => vẫn ra chữ thường"],["t,8,n,1","tốn","tôn1","Bộ gõ hiện cho ra kết quả sai, chưa xử lý tốt các dấu sắc huyền hỏi ngã nặng khi sau ký tự ô => Cần sửa lỗi."],["t,8,1","tố","tô1"],["8,n,2","ồn","ôn2"],["1,6","16","ấ","Gõ 61 bung ra ấ (đúng) nhưng gõ 16 Skey vẫn bung ra ấ (sai)."],["1,7","17","ế","Gõ 71 bung ra ế (đúng) nhưng gõ 17 Skey vẫn bung ra ế (sai)."],["2,8","28","ồ","Gõ 82 bung ra ồ (đúng) nhưng gõ 28 Skey vẫn bung ra ồ (sai)."],["3,9","39","ẳ","Gõ 93 bung ra ẳ (đúng) nhưng gõ 39 Skey vẫn bung ra ẳ (sai)."],["h,o,9,1,t","hoắt"],["h,o,9,t,1","hoắt"],["k,h,u,6,1,t","khuất"],["k,h,u,6,t,1","khuất"],["k,h,u,6,1,y","khuấy"],["k,h,u,6,y,1","khuấy"],["l,o,e,1,t","loét"],["l,o,e,t,1","loét"],["n,g,o,e,3,m","ngoẻm"],["n,g,o,e,m,3","ngoẻm"],["n,g,o,e,2,o","ngoèo"],["n,g,o,e,o,2","ngoèo"],["y,7,1,t","yết"],["y,7,t,1","yết"],["k,h,i,7,1,t","khiết"],["k,h,i,7,t,1","khiết"],["y,7,1,u","yếu"],["y,7,u,1","yếu"],["n,g,o,a,1,y","ngoáy"],["n,g,o,a,y,1","ngoáy"],["h,u,],5,t","huợt"],["h,u,],t,5","huợt"],["h,u,],4,n","huỡn"],["h,u,],n,4","huỡn"],["c,u,8,1,c","cuốc"],["c,u,8,c,1","cuốc"],["c,u,8,1,i","cuối"],["c,u,8,i,1","cuối"],["p,h,[,],1,c","phước"],["p,h,[,],c,1","phước"],["c,[,],2,i","cười"],["c,[,],i,2","cười"],["r,[,],5,u","rượu"],["r,[,],u,5","rượu"],["t,u,y,7,t,1","tuyết"],["t,u,y,7,1,t","tuyết"],["q,u,y,7,n,2","quyền"],["n,h,u,3,i","nhủi"],["n,h,u,i,3","nhủi"],["t,u,1,i","túi"],["t,u,i,1","túi"],["t,a,1,i","tái"],["t,a,i,1","tái"],["n,g,a,2,y","ngày"],["n,g,a,y,2","ngày"],["c,u,1,i","cúi"],["c,u,i,1","cúi"],["m,a,4,i","mãi"],["m,a,i,4","mãi"],["c,6,5,u","cậu"],["c,6,u,5","cậu"],["h,6,1","hấ"],["h,o,a,3,3","hoa3"],["h,Shift_o,Shift_a,3,3","hOA3"],["h,Capslock,o,a,3,3","hOA3"],["a,1,1","a1"],["a,1,1,1","a11"],["Shift_a,1,1","A1"],["h,6,6","h6"],["h,6,1,6","h616"],["h,6,1,6,6,6","h61666"],["h,o,a,3,6","hoa36"],["h,o,a,6,6","hoa6"]],PASS_TEXT="<b style='color: green'>PASS</b>",FAIL_TEXT="<b style='color: red'>FAIL</b>";window.onTestButtonPress=function(n,t){for(var e=n.getElementsByTagName("tbody")[0],o=0;o<testData.length;o++){var i=testData[o],a=testAnInput(i[0]),r=i[1]==a,c=e.insertRow(e.rows.length),h=c.insertCell(0);h.innerHTML=i[0],h=c.insertCell(1),h.innerHTML=i[1],h=c.insertCell(2),h.innerHTML=a,h=c.insertCell(3),h.innerHTML=r?PASS_TEXT:FAIL_TEXT,h=c.insertCell(4),h.innerHTML=i[3]||""}};
//# sourceMappingURL=main.min.js.map
